# Updates Log Rus

## NexstJS - beta ver 1.1.6 | 9.02.2025

### Изменения (Backend)
1. Упрощена структура проекта. (Многие модули из main.ts разбиты на отдельные составляющие: Session и Redis);
2. TokenService и OauthService стал удобнее и читабельнее.

### Исправления (Backend)
1. Исправлена проблема работы session и accessToken.

### Изменения (Client)
1. Вместо react-toastify создана кастомная реализация тостов (Alpha);
2. В TanStackProvider (queryClient Options) добавлены настройки по умолчанию.

### Исправления (Client)
1. axiosInstance теперь корректно запрашивает новый accessToken и обрабатывае внештатные ошибки.

### Удалено (Backend)
1. Ненужные методы из OauthService. (Вынесены в соответствующие модули).

### Удалено (Client)
1. Библиотека - react-toastify;
2. SoundProvider (Думаю в 99% нахер не нужен будет);
3. i18n.

## NexstJS - beta ver 1.1.4 | 7.02.2025

### Изменения (Backend)
1. Теперь все данные файлов хранятся в одной таблице;
2. Переработан процесс работы с файлами. Сделал проще и понятнее;
3. Улучшил работу с JWT, авторизацией и регистрацией;
4. Вход по UAK - Unique Authentication Key (создаётся автоматически при регистрации).

### Новое (Client)
1. Добавлена форма авторизации и регистрации;
2. Добавлена возможность отключить авто-проверку валидации;
3. Добавлены новые слова для локализации.

### Будущий функционал (Backend - Oauth)
1. Подтверждение почты;
2. Двухфакторка;
3. Вход/Регистрация через сервисы (VK, Google, Discord, Telegram, Apple).

## NexstJS - beta ver 1.1.2 | 2.02.2025

### Новое (Client - Валидация)
1. useValidateDate
2. useValidateFile
3. useValidateNumber
4. useValidateString
5. useValidate - вкл. в себя вышеперечисленные хуки.

### Новое (Client - Управление формой)
1. useEmail
2. useFile
3. usePassword
4. useQuantity
5. useRange
6. useText
7. useTimestamp
8. useForm - вкл. в себя вышеперечисленные хуки. (Временно не работает)

### Новое (Client - help функции)
1. checkFileFormat;
2. convertFileSize;
3. fileDestructurization;
4. formatFileSize;
5. hasDigits;
6. hasLetters;
7. hasSpace;
8. hasSpecialCharacters;
9. isLowerCase;
10. isUpperCase;
11. isUpperCaseFirstLetter.

### Новое (Client - Звуковых эффектов)
1. SoundProvider - общий провайдер для эффектов;

## NexstJS - beta ver 1.0.8 | 30.01.2025

### Новое (Видео)
1. Автоматическое удаление элементов управления, если их нет. (например, отсутствует данные о аудиодорожках или если в sources есть только один источник);
2. Переключение качества видео;
3. Смена озвучки - (Test);
4. Смена субтитров - (Test);
5. Режим кино (эффект);
6. Аберрация (эффект);
7. Затемнение (эффект);
8. Смена зацикливания видео;
9. Настройка timeskip при нажатии на кнопки пропуска;
10. Автоматическое сокрытие контролеров при бездействии и наоборот.

### Изменения (Видео)
1. Изменён подход к отображению постера видео. Теперь он передаётся не в само видео, а является изображение поверх видео;
2. Элемент (Video) будет отсутствовать, пока пользователь не нажмёт на видео хотя бы один раз. По идеи, это должно уменьшить расход трафика. Больший эффект должен быть заметен, если вы отображаете не одно видео, а несколько десяток, а то и сотен;
3. Большой хук (usePlayer) теперь разделён на 4 мелких хука, что позволяет проще вносить изменения и понимать код.
```js
    usePlayerState - Отвечает за общее состояние
    usePlayerPlayback - Отвечает за управление в контролере
    usePlayerUI = Отвечает за полноэкранный режим и в миниатюре
    usePlayerVFX - Отвечает за физуальные эффекты
```

### Ошибки
1. Если перейти в FullScreen Mode, а после в Picture in Picture, то будет сломан FullScreen Mode.

### Возможные ошибки
1. Смена озвучки и субтитров могут работать неккоректно.

### Комментарий
VFX эффекты для видео пока только тестируются и могут вообще не работать. </br>
Чтобы вкл автоматическое удаление элементов управления, в Компоненте Player напишите autoRemoveMissingControllers.
```js
    <Player autoRemoveMissingControllers />
```

## NexstJS - beta ver 1.0.7 | 28.01.2025

### Новое (Видео)
1. Picture in Picture;
2. Перемотка видео по кнопкам.

### Изменения (Видео)
1. Переработан дизайн видео плеера. Теперь он более информативен;
2. Полностью переписан код плеера (хук) и его компоненты. Теперь их легче читать.

### Улучшения
1. FullScreen теперь работает адекватно.

### Возможные ошибки
1. Picture in Picture пока работает немного не так как хотелось бы, но прогресс есть.

### Ошибки
1. Не работает возможность уменьшения/увеличения громкости.

## NexstJS - beta ver 1.0.6 | 27.01.2025

### Новое
1. Добавлена локализация - i18n (next-intl);

## NexstJS - beta ver 1.0.5 | 22.01.2025

### Новое
1. Теперь директории связанные с файлами сами создаются, если их не было изначально или вы их удалили;
2. Добавлен кастомный плеер (LiteConnectPlayer) в клиенте.

### Улучшения
1. Упрощён код проверки расширений и размеров файлов;

### Исправления
1. Минимальный и максимальный размер файлов из конфигурации теперь учитывается при загрузке в хранилище и бд;
2. Теперь за загрузку отвечает только один модуль, а не 2.

### Будущий функционал (Видео)
1. Picture in Picture;
2. Субтитры и их смена;
3. Предпросмотр кадра на временной шкале;
4. Смена озвучки;
5. Описание ключевых сцен на временной шкале;
6. Пропуск сцен по кнопке;
7. Промотка видео по кадрам за счёт зажатия в progressbar кружка или просто наводка на промежуток при нажатии на сам progressbar.

### Будущий функционал (Backend)
1. Добавление сервиса стриминга для видео и аудио;
2. Автоматическая конвертация аудио (ACC), видео (Webm) и изображения (Webp).

### Комментарий
Автоматическую конвертацию можно настроить в файле конфигураций - file.config.ts. Там же можно и настроить размеры и расширения файлов при их загрузке. </br>
Если ваш проект ориентирован на стриминг музыки, то предпочтительнее использовать ACC для аудио. </br>
Если ваш проект ориентирован на стриминг видео, то предпочтительнее использовать Webm для видео. </br>
Если ваш роект ориентирован на стриминг видео и музыки, то ACC для аудио и Webm для видео. </br>
А вообще, лучше оставьте базовые настройки автоматической конвертации и не еби** себе мозг. </br>
На данный момент кастомный плеер находится на стадии тестирования и в нём всё ещё может измениться, однако использовать его уже можно. </br>

### Возможные ошибки
1. Некоторые метаданные видео могут не успеть обработаться, из-за чего полная длина видео будет неизвестна и прогресс бар не будет продвигаться.

## NexstJS - beta ver 1.0.0 | 08.01.2025 (Data lost)
